<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://h-ywu.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://h-ywu.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2024-10-17T06:57:36+00:00</updated><id>https://h-ywu.github.io/feed.xml</id><title type="html">Haoyang Wu 吳浩楊 吴浩杨</title><subtitle></subtitle><entry><title type="html">Setup Environment for VoroMesh and PoNQ</title><link href="https://h-ywu.github.io/blog/2024/voromesh-ponq-environment/" rel="alternate" type="text/html" title="Setup Environment for VoroMesh and PoNQ"/><published>2024-09-12T11:24:00+00:00</published><updated>2024-09-12T11:24:00+00:00</updated><id>https://h-ywu.github.io/blog/2024/voromesh-ponq-environment</id><content type="html" xml:base="https://h-ywu.github.io/blog/2024/voromesh-ponq-environment/"><![CDATA[<p>I was trying to run <a href="https://github.com/nissmar/VoroMesh">code of VoroMesh</a>, but encountered some issues with the installation of <code class="language-plaintext highlighter-rouge">MinkowskiEngine</code> and PyTorch, GPU version on WSL in my isolated <code class="language-plaintext highlighter-rouge">conda</code> environment.</p> <ul> <li>Operating system: Windows Subsystem for Linux (Windows 11, Ubuntu 22.04.3 LTS)</li> <li>System CUDA version: 12.4</li> </ul> <p>Here are the commands to successfully set up the environment. I use <code class="language-plaintext highlighter-rouge">mamba</code> instead of naive <code class="language-plaintext highlighter-rouge">conda</code>.</p> <p>For PoNQ simply remove the part of compiling MinkowskEngine.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mamba create <span class="nt">-n</span> your_env <span class="nv">python</span><span class="o">=</span>3.9
mamba activate your_env

<span class="c"># WSL2 Ubuntu22</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/lib/wsl/lib:<span class="nv">$LD_LIBRARY_PATH</span>

<span class="c"># CUDA and PyTorch</span>
<span class="c"># cuda 12.4 seems to have issues with PyTorch, and MinkowskiEngine seems to cannot work with cuda 12</span>
mamba <span class="nb">install</span> <span class="nt">-c</span> <span class="s2">"nvidia/label/cuda-11.6.0"</span> cuda-toolkit cuda <span class="nt">-y</span>
mamba <span class="nb">install </span><span class="nv">pytorch</span><span class="o">==</span>1.12.1 <span class="nv">torchvision</span><span class="o">==</span>0.13.1 <span class="nv">torchaudio</span><span class="o">==</span>0.12.1 <span class="nv">cudatoolkit</span><span class="o">=</span>11.6 <span class="nt">-c</span> pytorch <span class="nt">-c</span> conda-forge <span class="nt">-y</span>
<span class="c"># Downgrade to use deprecated features in PyTorch</span>
mamba <span class="nb">install </span><span class="nv">mkl</span><span class="o">==</span>2024.0 <span class="nt">-y</span>
<span class="c"># Verify that the cuda version is what we installed in this isolated environment.</span>
nvcc <span class="nt">--version</span>
<span class="c"># Verify that the pytorch-cuda version (GPU) is what we installed in this isolated environment.</span>
python <span class="nt">-c</span> <span class="s2">"import torch; print(torch.version.cuda)"</span>

<span class="c"># MinkowskiEngine</span>
mamba <span class="nb">env </span>config vars <span class="nb">set </span><span class="nv">CUDA_HOME</span><span class="o">=</span><span class="s2">"path/to/your/env"</span>
mamba <span class="nb">install </span>ninja
<span class="c"># WARNING: Do NOT install openblas-devel using conda as listed in the README.md of the MinkowskiEngine repository, since it will downgrade the PyTorch to CPU version. Instead, we just use MKL</span>
mamba <span class="nb">install </span>mkl-include
<span class="c"># Missing cusparse.h</span>
mamba <span class="nb">install</span> <span class="nt">-c</span> conda-forge cudatoolkit-dev
git clone https://github.com/NVIDIA/MinkowskiEngine.git
<span class="nb">cd </span>MinkowskiEngine
<span class="c"># NOTE: If you use cuda 12, please first modify the code refer to https://github.com/NVIDIA/MinkowskiEngine/issues/543#issuecomment-1773458776</span>
<span class="c"># Work on WSL</span>
<span class="nb">export </span><span class="nv">MAX_JOBS</span><span class="o">=</span>1<span class="p">;</span>
python setup.py <span class="nb">install</span> <span class="nt">--blas_include_dirs</span><span class="o">=</span><span class="k">${</span><span class="nv">CONDA_PREFIX</span><span class="k">}</span>/include <span class="nt">--blas</span><span class="o">=</span>mkl

<span class="c"># PyTorch3D</span>
mamba <span class="nb">install</span> <span class="nt">-c</span> iopath iopath <span class="nt">-y</span>
mamba <span class="nb">install </span>jupyter <span class="nt">-y</span>
pip <span class="nb">install </span>scikit-image matplotlib imageio plotly opencv-python
mamba <span class="nb">install</span> <span class="nt">-c</span> fvcore <span class="nt">-c</span> conda-forge fvcore <span class="nt">-y</span>
pip <span class="nb">install </span>black usort flake8 flake8-bugbear flake8-comprehensions
mamba <span class="nb">install </span><span class="nv">pytorch3d</span><span class="o">=</span>0.7.0 <span class="nt">-c</span> pytorch3d <span class="nt">-y</span>

<span class="c"># Other required packages</span>
mamba <span class="nb">install </span>trimesh igl tqdm <span class="nt">-c</span> conda-forge <span class="nt">-y</span>
mamba <span class="nb">install </span>yaml scikit-learn <span class="nt">-c</span> anaconda <span class="nt">-y</span>
mamba <span class="nb">install </span>pytorch-scatter <span class="nt">-c</span> pyg <span class="nt">-y</span>
mamba <span class="nb">install </span>conda-forge::meshplot <span class="nt">-y</span>
mamba <span class="nb">install </span>anaconda::h5py <span class="nt">-y</span> 
mamba <span class="nb">install </span>open3d-admin::open3d <span class="nt">-y</span>
</code></pre></div></div>]]></content><author><name></name></author><category term="environment"/><category term="cuda"/><summary type="html"><![CDATA[Resolve issues of building MinkowskiEngine on WSL]]></summary></entry><entry><title type="html">Paper Summaries/Reports</title><link href="https://h-ywu.github.io/blog/2024/paper-summary/" rel="alternate" type="text/html" title="Paper Summaries/Reports"/><published>2024-05-26T07:02:00+00:00</published><updated>2024-05-26T07:02:00+00:00</updated><id>https://h-ywu.github.io/blog/2024/paper-summary</id><content type="html" xml:base="https://h-ywu.github.io/blog/2024/paper-summary/"><![CDATA[<p>Summaries in PDF format:</p> <ul> <li><a href="/assets/pdf/Paper_Summary_CWF_and_GCNO.pdf">CWF: Consolidating Weak Features in Highquality Mesh Simplification &amp; Globally Consistent Normal Orientation for Point Clouds by Regularizing the WindingNumber Field</a></li> <li><a href="/assets/pdf/Paper_Summary_WoBforBVPs.pdf">A Practical Walk-on-Boundary Method for Boundary Value Problems</a></li> <li><a href="/assets/pdf/Paper_Summary_SPSR.pdf">Stochastic Poisson Surface Reconstruction</a></li> </ul>]]></content><author><name></name></author><category term="graphics"/><category term="geometry-processing"/><summary type="html"><![CDATA[Summaries/Reports of some papers I read]]></summary></entry></feed>